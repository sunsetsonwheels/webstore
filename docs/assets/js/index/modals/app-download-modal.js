"use strict";const appDownloadsModal={controller:new BulmaModal("#app-download-modal"),content:{name:document.getElementById("app-download-modal-app-name"),icon:document.getElementById("app-download-modal-app-icon"),qrcode:document.getElementById("app-download-modal-app-download-qrcode")},buttons:{download:document.getElementById("app-download-modal-download-button")}};function setAppDownloadModalDetails(o){o.name?appDownloadsModal.content.name.innerText=o.name:appDownloadsModal.content.name.innerText="???",o.icon?appDownloadsModal.content.icon.src=o.icon:appDownloadsModal.content.icon.src="icons/default-icon.png",o.download.url?(appDownloadsModal.buttons.download.classList.remove("is-hidden"),appDownloadsModal.buttons.download.setAttribute("data-app-download",o.download.url),appDownloadsModal.buttons.download.setAttribute("data-app-slug",o.slug),appDownloadsModal.content.qrcode.innerHTML="",new QRCode(appDownloadsModal.content.qrcode,"bhackers:"+o.slug)):appDownloadsModal.buttons.download.classList.add("is-hidden")}appDownloadsModal.buttons.download.onclick=async o=>{o.target.classList.add("is-loading"),o.target.disabled=!0;try{await StoreDbAPI.dlCountApp(o.target.getAttribute("data-app-slug"))}catch(o){console.error(o),bulmaToast.toast({message:o,type:"is-danger"})}o.target.disabled=!1,o.target.classList.remove("is-loading"),window.open(o.target.getAttribute("data-app-download"),"_blank")};